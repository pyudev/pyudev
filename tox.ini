[tox]
envlist = py26,py31,doc

[testenv]
deps=
    pytest>=2.0.2
    mock>=0.7
commands=
    {toxinidir}/library_path_wrapper.py \
        {toxinidir}/bootstrap_native_bindings.py \
        {toxworkdir}/_download {envtmpdir}
    {toxinidir}/library_path_wrapper.py \
        py.test {posargs:--junitxml={envname}-tests.xml}

[testenv:doc]
deps=
    sphinx>=1.0.7
    sphinxcontrib-issuetracker>=0.7.2
commands=
    {toxinidir}/library_path_wrapper.py \
        {toxinidir}/bootstrap_native_bindings.py \
        {toxworkdir}/_download {envtmpdir}
    {toxinidir}/library_path_wrapper.py \
        sphinx-build -W -b linkcheck -d {envtmpdir}/doctrees doc \
        {envtmpdir}/linkcheck
    {toxinidir}/library_path_wrapper.py \
        sphinx-build -W -b html -d {envtmpdir}/doctrees doc \
        {envtmpdir}/html
